<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Puffly | The Sovereign App</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #ff8fa3; --primary-grad: linear-gradient(135deg, #ffb3c1, #ff758f);
            --bg: #fff0f3; --card: #ffffff; --text: #4a2c32; --muted: #a38a8e;
            --accent: #ff4d6d; --bubble-me: #ffb3c1; --bubble-you: #ffe5ec;
            --nav-bg: rgba(255, 255, 255, 0.95);
        }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; -webkit-tap-highlight-color: transparent; }
        body { background-color: var(--bg); color: var(--text); height: 100vh; overflow: hidden; display: flex; flex-direction: column; }

        /* --- 1. Auth Section (‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å) --- */
        #authView { position: fixed; inset: 0; background: white; z-index: 9000; display: flex; flex-direction: column; padding: 40px 25px; transition: 0.8s; }
        .auth-logo { text-align: center; margin-top: 60px; }
        .btn-auth { border: none; padding: 16px; border-radius: 30px; font-weight: bold; font-size: 15px; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 10px; transition: 0.3s; }
        .btn-line { background: #06C755; color: white; }
        .btn-google { background: #f8f9fa; color: #333; border: 1px solid #ddd; }
        .btn-main { background: var(--primary-grad); color: white; margin-top: 10px; }

        /* --- 2. Splash Screen --- */
        #splash { position: fixed; inset: 0; background: var(--primary-grad); z-index: 9999; display: none; flex-direction: column; align-items: center; justify-content: center; color: white; transition: 0.8s; }
        .splash-logo { font-size: 60px; animation: bounce 2s infinite; }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-20px); } }

        /* --- Global Layout --- */
        .view-section { flex: 1; display: none; overflow-y: auto; padding-bottom: 80px; }
        .active-view { display: block; }
        .bottom-nav { position: fixed; bottom: 0; left: 0; right: 0; height: 75px; background: var(--nav-bg); backdrop-filter: blur(15px); display: flex; justify-content: space-around; align-items: center; border-top: 1px solid rgba(0,0,0,0.05); z-index: 4000; }
        .nav-item { display: flex; flex-direction: column; align-items: center; gap: 5px; color: var(--muted); cursor: pointer; font-size: 11px; }
        .nav-item.active { color: var(--primary); }
        .nav-item i { font-size: 24px; }

        /* --- 3. Home View (Reels) --- */
        #homeView { background: #000; overflow-y: scroll; scroll-snap-type: y mandatory; }
        .reel-video { position: relative; width: 100%; height: 100vh; scroll-snap-align: start; display: flex; align-items: center; justify-content: center; color: white; }
        .reel-overlay { position: absolute; bottom: 100px; left: 15px; }
        .reel-actions { position: absolute; bottom: 120px; right: 15px; display: flex; flex-direction: column; gap: 20px; align-items: center; }

        /* --- 4. Chat View (Full) --- */
        .chat-header { padding: 15px; background: white; display: flex; align-items: center; gap: 15px; border-bottom: 1px solid #eee; position: sticky; top: 0; z-index: 100; }
        .chat-container { padding: 15px; display: flex; flex-direction: column; gap: 12px; height: calc(100vh - 215px); overflow-y: auto; background: var(--bg); }
        .bubble { max-width: 80%; padding: 10px 15px; border-radius: 18px; font-size: 14px; }
        .bubble.me { align-self: flex-end; background: var(--primary-grad); color: white; border-bottom-right-radius: 4px; }
        .bubble.you { align-self: flex-start; background: var(--bubble-you); border-bottom-left-radius: 4px; border: 1px solid rgba(255,143,163,0.2); }

        /* --- 5. Profile & Wallet & Grid --- */
        .profile-header { text-align: center; padding: 30px 20px; background: white; border-bottom-left-radius: 30px; border-bottom-right-radius: 30px; }
        .profile-pic { width: 90px; height: 90px; border-radius: 30px; background: var(--primary-grad); margin: 0 auto 15px; display: flex; align-items: center; justify-content: center; color: white; font-size: 40px; }
        .wallet-card { margin: -20px 20px 20px; background: var(--primary-grad); border-radius: 20px; padding: 20px; color: white; box-shadow: 0 10px 25px rgba(255,143,163,0.3); }
        .video-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 2px; background: white; padding: 2px; margin-top: 15px; }
        .video-item { aspect-ratio: 1/1; background: #eee; position: relative; overflow: hidden; }
        .video-item img { width: 100%; height: 100%; object-fit: cover; }

        /* --- 6. Live Overlay & Gift --- */
        #liveOverlay { display: none; position: fixed; inset: 0; background: #000; z-index: 5000; flex-direction: column; }
        .live-chat { flex: 1; padding: 20px; display: flex; flex-direction: column; justify-content: flex-end; gap: 10px; color: white; overflow-y: auto; }
        .gift-panel { position: absolute; bottom: -100%; left: 0; right: 0; background: white; border-top-left-radius: 25px; border-top-right-radius: 25px; padding: 20px; transition: 0.4s; z-index: 5001; display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; }
        .gift-panel.active { bottom: 0; }
        .gift-item { text-align: center; padding: 10px; border-radius: 15px; cursor: pointer; }
        .gift-item span { display: block; font-size: 24px; margin-bottom: 5px; }
    </style>
</head>
<body onclick="hideGiftPanel(event)">

    <div id="authView">
        <div class="auth-logo">
            <i class="fa-solid fa-dove" style="font-size: 60px; color: var(--primary);"></i>
            <h1 style="margin-top: 20px; letter-spacing: 5px;">PUFFLY</h1>
            <p style="color: var(--muted); margin-top: 5px;">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏î‡πÉ‡∏™‡πÑ‡∏õ‡∏Å‡∏±‡∏ö‡πÄ‡∏£‡∏≤</p>
        </div>
        <div style="margin-top: 60px; display: flex; flex-direction: column; gap: 15px;">
            <button class="btn-auth btn-line" onclick="handleAuth()"><i class="fa-brands fa-line"></i> ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏î‡πâ‡∏ß‡∏¢ LINE</button>
            <button class="btn-auth btn-google" onclick="handleAuth()"><img src="https://www.gstatic.com/images/branding/product/1x/googleg_48dp.png" width="18"> ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏î‡πâ‡∏ß‡∏¢ Google</button>
            <div style="text-align: center; color: #ddd; margin: 10px 0;">‡∏´‡∏£‡∏∑‡∏≠</div>
            <input type="text" placeholder="‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå" style="padding: 16px; border-radius: 30px; border: 1px solid #eee; outline: none; text-align: center;">
            <button class="btn-auth btn-main" onclick="handleAuth()">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÉ‡∏´‡∏°‡πà</button>
        </div>
        <p style="margin-top: auto; text-align: center; font-size: 11px; color: var(--muted);">
            ‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ñ‡∏∑‡∏≠‡∏ß‡πà‡∏≤‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö <a href="#" style="color: var(--primary);">‡∏Ç‡πâ‡∏≠‡∏ï‡∏Å‡∏•‡∏á‡πÅ‡∏•‡∏∞‡∏ô‡πÇ‡∏¢‡∏ö‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</a>
        </p>
    </div>

    <div id="splash">
        <i class="fa-solid fa-dove splash-logo"></i>
        <h1 style="letter-spacing: 5px; margin-top: 15px;">PUFFLY</h1>
    </div>

    <div id="homeView" class="view-section">
        <div class="reel-video">
            <i class="fa-solid fa-play-circle" style="font-size: 80px; opacity: 0.2;"></i>
            <div class="reel-overlay">
                <h3>@Puffly_Official</h3>
                <p>‡∏™‡∏±‡∏°‡∏ú‡∏±‡∏™‡πÇ‡∏•‡∏Å‡∏Ç‡∏≠‡∏á‡∏ô‡∏Å‡∏ó‡∏µ‡πà‡∏ô‡πà‡∏≤‡∏£‡∏±‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î üïäÔ∏è‚ú®</p>
            </div>
            <div class="reel-actions">
                <div class="action-btn" onclick="openLive()" style="cursor:pointer; text-align:center;"><i class="fa-solid fa-tower-broadcast" style="color:red; font-size:30px;"></i><p style="font-size:10px;">Live</p></div>
                <i class="fa-solid fa-heart" style="font-size:30px;"></i>
                <i class="fa-solid fa-share" style="font-size:30px;"></i>
            </div>
        </div>
    </div>

    <div id="inboxView" class="view-section">
        <div class="chat-header">
            <div style="width:40px; height:40px; border-radius:12px; background:var(--primary-grad); display:flex; align-items:center; justify-content:center; color:white;"><i class="fa-solid fa-dove"></i></div>
            <div style="flex:1;"><b>‡∏ù‡πà‡∏≤‡∏¢‡∏î‡∏π‡πÅ‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ Puffly</b><p style="font-size:10px; color:green;">Online</p></div>
            <i class="fa-solid fa-video" style="color:var(--primary);"></i>
        </div>
        <div id="chatBox" class="chat-container">
            <div class="bubble you">‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡πà‡∏∞! ‡∏°‡∏µ‡∏≠‡∏∞‡πÑ‡∏£‡πÉ‡∏´‡πâ‡∏ä‡πà‡∏ß‡∏¢‡πÅ‡∏à‡πâ‡∏á‡πÑ‡∏ß‡πâ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏ô‡∏∞‡∏Ñ‡∏∞ üéÄ</div>
        </div>
        <div style="padding:15px; background:white; border-top:1px solid #eee;">
            <div style="display:flex; gap:20px; margin-bottom:10px; color:var(--primary); font-size:20px;">
                <i class="fa-solid fa-image" onclick="document.getElementById('fileInp').click()"></i>
                <i class="fa-solid fa-microphone" id="micBtn" onclick="recordVoice()"></i>
            </div>
            <div style="display:flex; gap:10px; background:#f8f8f8; padding:10px 15px; border-radius:25px; align-items:center;">
                <input type="text" id="msgInput" style="flex:1; background:none; border:none; outline:none;" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°...">
                <i class="fa-solid fa-paper-plane" style="color:var(--primary);" onclick="sendMsg()"></i>
            </div>
        </div>
        <input type="file" id="fileInp" hidden onchange="handleFile(this)">
    </div>

    <div id="profileView" class="view-section">
        <div class="profile-header">
            <div class="profile-pic"><i class="fa-solid fa-user"></i></div>
            <h2>@Puffly_Creator</h2>
            <p style="color:var(--muted); font-size:12px;">‡∏ú‡∏π‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á Asura's Ransom</p>
        </div>
        <div class="wallet-card">
            <div style="display:flex; justify-content:space-between; align-items:center;">
                <div><p style="font-size:10px;">Coins</p><h2 id="userCoins">100</h2></div>
                <div><p style="font-size:10px;">‡∏¢‡∏≠‡∏î‡∏ñ‡∏≠‡∏ô‡πÑ‡∏î‡πâ</p><h2>‡∏ø <span id="userIncome">0.00</span></h2></div>
                <button onclick="withdrawMoney()" style="background:white; color:var(--primary); border:none; padding:5px 12px; border-radius:10px; font-weight:bold; font-size:11px;">‡∏ñ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</button>
            </div>
        </div>
        <div style="padding:0 15px; font-weight:bold;">‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</div>
        <div class="video-grid">
            <div class="video-item"><img src="https://picsum.photos/200/200?1"><i class="fa-solid fa-play" style="position:absolute; top:5px; left:5px; color:white; font-size:10px;"> 10K</i></div>
            <div class="video-item"><img src="https://picsum.photos/200/200?2"></div>
            <div class="video-item"><img src="https://picsum.photos/200/200?3"></div>
        </div>
        <div style="padding:15px; background:white; margin:15px; border-radius:20px;">
            <p style="font-size:13px; font-weight:bold; margin-bottom:10px;">Puffly Shop</p>
            <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px;">
                <div onclick="topUp(100, 35)" style="border:1px solid #eee; padding:10px; border-radius:15px; text-align:center;">ü™ô 100 <br><b style="color:var(--primary);">‡∏ø35</b></div>
                <div onclick="topUp(500, 150)" style="border:1px solid #eee; padding:10px; border-radius:15px; text-align:center;">ü™ô 500 <br><b style="color:var(--primary);">‡∏ø150</b></div>
            </div>
        </div>
    </div>

    <div id="liveOverlay">
        <div style="padding:20px; display:flex; justify-content:space-between; color:white; align-items:center;">
            <div style="background:red; padding:3px 10px; border-radius:5px; font-weight:bold; font-size:12px;">LIVE</div>
            <div>ü™ô <span id="liveCoins">100</span></div>
            <i class="fa-solid fa-xmark" onclick="closeLive()" style="font-size:25px;"></i>
        </div>
        <div id="liveComments" class="live-chat"></div>
        <div style="padding:15px; display:flex; gap:10px; align-items:center; background:rgba(0,0,0,0.5);">
            <input type="text" id="liveInp" style="flex:1; background:rgba(255,255,255,0.2); border:none; padding:12px; border-radius:25px; color:white; outline:none;" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå...">
            <button onclick="sendLiveMsg()" style="background:var(--primary); color:white; border:none; width:40px; height:40px; border-radius:50%;"><i class="fa-solid fa-paper-plane"></i></button>
            <i class="fa-solid fa-gift" style="color:#ffd700; font-size:30px;" onclick="toggleGiftPanel(event)"></i>
        </div>
        <div id="giftPanel" class="gift-panel">
            <div class="gift-item" onclick="sendSpecificGift('üéÄ', 10, 2.5)"><span>üéÄ</span><small>10 C</small></div>
            <div class="gift-item" onclick="sendSpecificGift('üß∏', 50, 12.5)"><span>üß∏</span><small>50 C</small></div>
            <div class="gift-item" onclick="sendSpecificGift('üëë', 500, 125)"><span>üëë</span><small>500 C</small></div>
            <div class="gift-item" onclick="sendSpecificGift('üïäÔ∏è', 1000, 250)"><span>üïäÔ∏è</span><small>1K C</small></div>
        </div>
    </div>

    <div class="bottom-nav">
        <div class="nav-item active" onclick="switchTab('homeView', this)"><i class="fa-solid fa-house"></i><span>‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</span></div>
        <div class="nav-item" onclick="alert('Search')"><i class="fa-solid fa-magnifying-glass"></i><span>‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</span></div>
        <div class="nav-item" onclick="document.getElementById('fileInp').click()"><i class="fa-solid fa-circle-plus" style="font-size:35px; color:var(--primary);"></i></div>
        <div class="nav-item" onclick="switchTab('inboxView', this)"><i class="fa-solid fa-comment-dots"></i><span>‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°</span></div>
        <div class="nav-item" onclick="switchTab('profileView', this)"><i class="fa-solid fa-user"></i><span>‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå</span></div>
    </div>

    <script>
        let myCoins = 100;
        let myIncome = 0;

        // --- Auth Logic ---
        function handleAuth() {
            const auth = document.getElementById('authView');
            const splash = document.getElementById('splash');
            auth.style.opacity = '0';
            setTimeout(() => {
                auth.style.display = 'none';
                splash.style.display = 'flex';
                setTimeout(() => {
                    splash.style.opacity = '0';
                    setTimeout(() => {
                        splash.style.display = 'none';
                        document.getElementById('homeView').classList.add('active-view');
                    }, 800);
                }, 2000);
            }, 500);
        }

        // --- Navigation ---
        function switchTab(viewId, el) {
            document.querySelectorAll('.view-section').forEach(v => v.classList.remove('active-view'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            document.getElementById(viewId).classList.add('active-view');
            el.classList.add('active');
        }

        // --- Chat System ---
        function sendMsg() {
            const inp = document.getElementById('msgInput');
            if(!inp.value) return;
            appendBubble(inp.value, 'me');
            inp.value = "";
            setTimeout(() => appendBubble("Puffly ‡∏£‡∏±‡∏ö‡∏ó‡∏£‡∏≤‡∏ö‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏∞ ‚òÅÔ∏è", 'you'), 1000);
        }
        function appendBubble(txt, side) {
            const b = document.createElement('div');
            b.className = `bubble ${side}`;
            b.innerHTML = txt;
            document.getElementById('chatBox').appendChild(b);
            document.getElementById('chatBox').scrollTop = document.getElementById('chatBox').scrollHeight;
        }
        function handleFile(input) {
            if(input.files[0]) {
                const url = URL.createObjectURL(input.files[0]);
                appendBubble(`<img src="${url}" style="width:100%; border-radius:10px;">`, 'me');
            }
        }
        function recordVoice() {
            const btn = document.getElementById('micBtn');
            btn.style.color = 'red';
            setTimeout(() => {
                btn.style.color = 'var(--primary)';
                appendBubble(`<i class="fa-solid fa-play"></i> Voice Message (0:05)`, 'me');
            }, 2000);
        }

        // --- Live & Gift ---
        function openLive() { document.getElementById('liveOverlay').style.display = 'flex'; updateUI(); }
        function closeLive() { document.getElementById('liveOverlay').style.display = 'none'; }
        function sendLiveMsg() {
            const inp = document.getElementById('liveInp');
            if(!inp.value) return;
            const d = document.createElement('div');
            d.innerHTML = `<b>Me:</b> ${inp.value}`;
            document.getElementById('liveComments').appendChild(d);
            inp.value = '';
            document.getElementById('liveComments').scrollTop = document.getElementById('liveComments').scrollHeight;
        }
        function toggleGiftPanel(e) { e.stopPropagation(); document.getElementById('giftPanel').classList.toggle('active'); }
        function hideGiftPanel(e) { if(!document.getElementById('giftPanel').contains(e.target)) document.getElementById('giftPanel').classList.remove('active'); }
        
        function sendSpecificGift(icon, cost, val) {
            if(myCoins >= cost) {
                myCoins -= cost;
                myIncome += (val * 0.7);
                updateUI();
                const d = document.createElement('div');
                d.style.background = 'var(--primary-grad)';
                d.style.padding = '8px'; d.style.borderRadius = '10px';
                d.innerHTML = `üéÅ ‡∏Ñ‡∏∏‡∏ì‡∏™‡πà‡∏á ${icon} ‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤ ${cost} Coins!`;
                document.getElementById('liveComments').appendChild(d);
                document.getElementById('giftPanel').classList.remove('active');
            } else { alert("Coins ‡πÑ‡∏°‡πà‡∏û‡∏≠‡∏Ñ‡πà‡∏∞"); }
        }

        // --- Wallet ---
        function topUp(c, p) { if(confirm(`‡πÄ‡∏ï‡∏¥‡∏° ${c} Coins ‡∏£‡∏≤‡∏Ñ‡∏≤ ‡∏ø${p}?`)) { myCoins += c; updateUI(); } }
        function withdrawMoney() { if(myIncome <= 0) return alert("‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏Ñ‡πà‡∏∞"); alert(`‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô ‡∏ø${myIncome.toFixed(2)} ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!`); myIncome = 0; updateUI(); }
        function updateUI() {
            document.getElementById('userCoins').innerText = myCoins;
            document.getElementById('liveCoins').innerText = myCoins;
            document.getElementById('userIncome').innerText = myIncome.toFixed(2);
        }
    </script>
</body>
</html>
